"use strict";for(var getHtml=function(t,n){return n||(n=""),'\n<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Taut</title>'+n+"\n</head>"+t+"\n"},colorKey="32a719e6355e88f1c782e5415053c056c2a2929b25d45b5755b439d2c01c131005299c03415719",colors={},i=97;i<123;i++){var colorIndex=3*(i-97);colors[String.fromCharCode(i)]=colorKey.substring(colorIndex,colorIndex+3)}module.exports={index:function(t){t||(t=0);var n='<link rel="stylesheet" href="/app.css" />',e='\nautofocus \nname="message" \nid="message-input" \nplaceholder="Message #general"\nautocorrect="off" \nautocomplete="off" \nspellcheck="true"\n',i='\n<body><div id="client-ui"><header><div id="team_menu"><span id="team_name">Taut</span></div><div id="ch"><div id="ct">#general</div><div id="chi">'+t+' members</div></div></header><div id="footer"><div id="footer_msgs"><div id="mic"><form action="/message" method="post" target="" id="message-form" onsubmit="newMessage();return false;"><noscript><input '+e+"/></noscript><textarea "+e+' /></textarea></form></div></div></div><div id="client_body"><div id="col_messages"><div class="row-fluid"><div id="ccb"></div><div id="cc"><ul id="im-list"></ul></div><noscript><iframe name="mc" src="/messages?id='+Math.random()+'#l" frameborder="0"></iframe></noscript><div id="mc"><div id="connection_div">Connection lost. Reconnecting...</div><div id="msd"><div id="msg_div"><div id="dc"><div class="day_msgs" id="day_msgs"></div></div></div></div></div></div></div></div></div><script src="/client.js"></script></body>';return getHtml(i,n)},ppls:function(t){return t.map(function(t){return'<li><span class="presence active"></span>'+t+"\n</li>"})},form:function(){return getHtml('\n<form method="post"><p>Enter a nickname:</p><input type="text" name="nic"><input type="submit" /></form>')},messages:function(t,n){var e=this.messagesArray(t).join(""),i="</div></div></div></div></div></body>";return n&&(i=""),getHtml('\n<body class="iframe"><div id="iframe_body"><div id="msgs_scroller_div"><div id="msg_div"><div class="day_container"><div class="day_msgs" id="day_msgs">'+e+i+'\n<div id="l"></div>','\n<link rel="stylesheet" href="/app.css" /><!-- <noscript> --><meta http-equiv="refresh" content="0; ?id='+Math.random()+'" /><!-- </noscript> -->')},messagesArray:function(t){for(var n=[],e=0;e<t.length;e++){var i=void 0;e>0&&(i=t[e-1]),n.push(this.message(t[e],i))}return n},message:function(t,n){var e=t.sender.replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=t.content.replace(/</g,"&lt;").replace(/>/g,"&gt;"),s={"\\*":"b",_:"i","~":"strike","`":"code"};for(var a in s){var d=new RegExp("(\\s?)"+a+"(.*?)"+a+"($|\\s)","gmi");i=i.replace(d,"$1<"+s[a]+">$2</"+s[a]+">")}i=i.replace(/^&gt;(.*)$/gm,"<blockquote>$1</blockquote>"),i=i.replace(/(^|\s)([-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*))/gi,'$1<a href="http://$2" target="_blank">$2</a>'),i=i.replace(/(^|\s)(https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]+\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*))/gi,'$1<a href="$2" target="_blank">$2</a>'),i=i.replace(/\n/gi,"<br>");var r='\n<div class="message_gutter"><div class="message_icon"><span \nstyle="background-color: #'+(colors[e[0].toLowerCase()]||"ccc")+'"\nclass="member_image">'+e[0]+"\n</span></div></div>",c='\n<span class="member">'+e+'</span>&nbsp;\n<span class="timestamp" data-ts="'+t.ts+'"></span>';return n&&n.sender==t.sender&&t.ts-n.ts<6e4&&(c="",r=""),"\n<ts-message>"+r+'\n<div class="message_content ">'+c+'\n<span class="message_body">'+i+"</span></div></ts-message>"}};